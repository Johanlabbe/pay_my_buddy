<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Transférer – Pay My Buddy</title>
  <link rel="stylesheet" th:href="@{/css/style.css}"/>
</head>
<body>

  <div th:insert="fragments/header :: navbar"></div>

  <main class="page-content">
    <h2>Faire un transfert</h2>
    <p>Solde : <strong th:text="${#numbers.formatDecimal(currentBalance,1,2)} + ' €'">0,00 €</strong></p>

    <div th:if="${success}" class="alert alert-success" th:text="${success}"></div>
    <div th:if="${error}"   class="alert alert-error"   th:text="${error}"></div>

    <form th:action="@{/transfer}" th:object="${transactionForm}" method="post" class="form-inline">
      <select th:field="*{receiverId}" required>
        <option value="" disabled selected>Sélectionner une relation</option>
        <option th:each="f : ${friends}"
                th:value="${f.id}"
                th:text="${f.username + ' (' + f.email + ')'}">
        </option>
      </select>
      <input type="text"    th:field="*{description}" placeholder="Description (facultatif)"/>
      <input type="number"  th:field="*{amount}"      placeholder="Montant (€)" min="0.01" step="0.01" required/>
      <button type="submit" class="btn-primary">Payer</button>
    </form>

    <div class="transactions-table">
      <table>
        <thead>
          <tr>
            <th>Relations</th>
            <th>Description</th>
            <th>Montant</th>
          </tr>
        </thead>
        <tbody>
          <tr th:each="t : ${transactions}">
            <td th:text="${t.relationName}">Nom</td>
            <td th:text="${t.description}">Libellé</td>
            <td th:text="${t.amount} + ' €'">0,00 €</td>
          </tr>
        </tbody>
      </table>
    </div>
  </main>

  <div th:insert="fragments/footer :: foot"></div>

</body>
</html>
